# https://circleci.com/docs/2.0/configuration-reference/

version: 2

jobs:
  build:
    docker:
      - image: nya3jp/elekiter-ci:v1
    working_directory: ~/project
    steps:
      - checkout
      - run: bazel build //examples/...
      - run: bazel test --test_arg=--gtest_output=xml:/tmp/test_results/ //examples/...
      - store_test_results:
          path: /tmp/test_results
      - store_artifacts:
          path: /tmp/test_results
    branches:
      only:
        - master
