{% extends "base.html" %}

{% block content %}

<style>
.config {
  height: 180px;
  white-space: nowrap;
  text-align: center;
}
.config > div {
  display: inline-block;
  transform: rotate(-90deg);
  width: 30px;
}
.config > div > span {
  padding: 0 8px;
}
.punter {
  width: 200px;
}
.cell {
  text-align: center;
}
</style>

<img src="/static/logo.png" style="height: 100px; width: auto">

<form action="/" method="GET" class="well pull-right" style="margin: 20px">
  <select name="label">
    {% for l in labels %}
    <option value="{{ l }}" {% if l == label %}selected="selected"{% endif %}>{{ l }}</option>
    {% endfor %}
  </select>
  <button>Go</button>
</form>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="punter"></th>
      {% for config in configs %}
      <th class="config">
        <div>
          <span>{{ config.split()[0] }}</span>
        </div>
      </th>
      {% endfor %}
    </tr>
    <tr>
      <th class="punter"></th>
      {% for config in configs %}
      <th class="cell">
        {{ config.split()[1] }}
      </th>
      {% endfor %}
    </tr>
    <tr>
      <th class="punter"></th>
      {% for info in infos %}
      <td class="cell" style="font-size: 10px">
        S={{ info.num_sites }}<br>
        R={{ info.num_rivers }}<br>
        M={{ info.num_mines }}
      </td>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for punter in punters %}
    <tr>
      <th class="punter">{{ punter }}</th>
      {% for config in configs %}
      {% set cell = matrix[(config, punter)] %}
      <td class="cell {{ cell.best and 'info' }}">
        {% if cell.avg %}
        {{ '{:.1f}'.format(cell.avg) }}
        {% else %}
        -
        {% endif %}
        ({{ cell.count }})
      </td>
      {% endfor %}
    {% endfor %}
  </tbody>
</table>

<div style="text-align: right">
  Jobs: {{ num_finished_jobs }} / {{ num_all_jobs }}
</div>

{% endblock %}
